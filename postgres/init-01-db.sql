DROP TABLE IF EXISTS MEASURES, PRODUCTS, CONTAINERS, QUANTITIES;

CREATE TABLE MEASURES
(
    id           BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
    measure_name VARCHAR(64) NOT NULL
);

CREATE TABLE PRODUCTS
(
    id           BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
    product_name VARCHAR(64) NOT NULL,
    measure_id   BIGINT,
    capacity     DOUBLE PRECISION,

    CONSTRAINT FK_PRODUCTS_MEASURES FOREIGN KEY (measure_id) REFERENCES MEASURES (id)
);

CREATE TABLE CONTAINERS
(
    spot_coordinates VARCHAR(64) PRIMARY KEY,
    product_id       BIGINT,

    CONSTRAINT FK_CONTAINERS_PRODUCTS FOREIGN KEY (product_id) REFERENCES PRODUCTS (id)

);

CREATE TABLE QUANTITIES
(
    id           BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
    container_id VARCHAR(64),
    sensor_date  TIMESTAMP,
    quantity     DOUBLE PRECISION,

    CONSTRAINT FK_QUANTITIES_CONTAINERS FOREIGN KEY (container_id) REFERENCES CONTAINERS (spot_coordinates)
);